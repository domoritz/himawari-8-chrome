!function(){"use strict";var e=new Date,t=new Date;function n(r,o,a,u){function c(e){return r(e=0===arguments.length?new Date:new Date(+e)),e}return c.floor=function(e){return r(e=new Date(+e)),e},c.ceil=function(e){return r(e=new Date(e-1)),o(e,1),r(e),e},c.round=function(e){var t=c(e),n=c.ceil(e);return e-t<n-e?t:n},c.offset=function(e,t){return o(e=new Date(+e),null==t?1:Math.floor(t)),e},c.range=function(e,t,n){var a,u=[];if(e=c.ceil(e),n=null==n?1:Math.floor(n),!(e<t&&n>0))return u;do{u.push(a=new Date(+e)),o(e,n),r(e)}while(a<e&&e<t);return u},c.filter=function(e){return n((function(t){if(t>=t)for(;r(t),!e(t);)t.setTime(t-1)}),(function(t,n){if(t>=t)if(n<0)for(;++n<=0;)for(;o(t,-1),!e(t););else for(;--n>=0;)for(;o(t,1),!e(t););}))},a&&(c.count=function(n,o){return e.setTime(+n),t.setTime(+o),r(e),r(t),Math.floor(a(e,t))},c.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?c.filter(u?function(t){return u(t)%e==0}:function(t){return c.count(0,t)%e==0}):c:null}),c}const r=6e4,o=864e5,a=6048e5;var u=n((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*r)/o),(e=>e.getDate()-1));function c(e){return n((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*r)/a}))}var i=c(0),s=c(1);c(2),c(3);var l=c(4);c(5),c(6);var g=n((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));g.every=function(e){return isFinite(e=Math.floor(e))&&e>0?n((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var f=g,d=n((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/o}),(function(e){return e.getUTCDate()-1}));function m(e){return n((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/a}))}var h=m(0),w=m(1);m(2),m(3);var y=m(4);m(5),m(6);var v=n((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));v.every=function(e){return isFinite(e=Math.floor(e))&&e>0?n((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var T=v;function p(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function C(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function D(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var U,M,b,S={"-":"",_:" ",0:"0"},I=/^\s*\d+/,x=/^%/,E=/[\\^$*+?|[\]().{}]/g;function L(e,t,n){var r=e<0?"-":"",o=(r?-e:e)+"",a=o.length;return r+(a<n?new Array(n-a+1).join(t)+o:o)}function F(e){return e.replace(E,"\\$&")}function Y(e){return new RegExp("^(?:"+e.map(F).join("|")+")","i")}function _(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function A(e,t,n){var r=I.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function H(e,t,n){var r=I.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function $(e,t,n){var r=I.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function O(e,t,n){var r=I.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function k(e,t,n){var r=I.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function G(e,t,n){var r=I.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function B(e,t,n){var r=I.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function j(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function N(e,t,n){var r=I.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function R(e,t,n){var r=I.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Z(e,t,n){var r=I.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function P(e,t,n){var r=I.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function W(e,t,n){var r=I.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function V(e,t,n){var r=I.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function q(e,t,n){var r=I.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function J(e,t,n){var r=I.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Q(e,t,n){var r=I.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function X(e,t,n){var r=x.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function z(e,t,n){var r=I.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function K(e,t,n){var r=I.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function ee(e,t){return L(e.getDate(),t,2)}function te(e,t){return L(e.getHours(),t,2)}function ne(e,t){return L(e.getHours()%12||12,t,2)}function re(e,t){return L(1+u.count(f(e),e),t,3)}function oe(e,t){return L(e.getMilliseconds(),t,3)}function ae(e,t){return oe(e,t)+"000"}function ue(e,t){return L(e.getMonth()+1,t,2)}function ce(e,t){return L(e.getMinutes(),t,2)}function ie(e,t){return L(e.getSeconds(),t,2)}function se(e){var t=e.getDay();return 0===t?7:t}function le(e,t){return L(i.count(f(e)-1,e),t,2)}function ge(e){var t=e.getDay();return t>=4||0===t?l(e):l.ceil(e)}function fe(e,t){return e=ge(e),L(l.count(f(e),e)+(4===f(e).getDay()),t,2)}function de(e){return e.getDay()}function me(e,t){return L(s.count(f(e)-1,e),t,2)}function he(e,t){return L(e.getFullYear()%100,t,2)}function we(e,t){return L((e=ge(e)).getFullYear()%100,t,2)}function ye(e,t){return L(e.getFullYear()%1e4,t,4)}function ve(e,t){var n=e.getDay();return L((e=n>=4||0===n?l(e):l.ceil(e)).getFullYear()%1e4,t,4)}function Te(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+L(t/60|0,"0",2)+L(t%60,"0",2)}function pe(e,t){return L(e.getUTCDate(),t,2)}function Ce(e,t){return L(e.getUTCHours(),t,2)}function De(e,t){return L(e.getUTCHours()%12||12,t,2)}function Ue(e,t){return L(1+d.count(T(e),e),t,3)}function Me(e,t){return L(e.getUTCMilliseconds(),t,3)}function be(e,t){return Me(e,t)+"000"}function Se(e,t){return L(e.getUTCMonth()+1,t,2)}function Ie(e,t){return L(e.getUTCMinutes(),t,2)}function xe(e,t){return L(e.getUTCSeconds(),t,2)}function Ee(e){var t=e.getUTCDay();return 0===t?7:t}function Le(e,t){return L(h.count(T(e)-1,e),t,2)}function Fe(e){var t=e.getUTCDay();return t>=4||0===t?y(e):y.ceil(e)}function Ye(e,t){return e=Fe(e),L(y.count(T(e),e)+(4===T(e).getUTCDay()),t,2)}function _e(e){return e.getUTCDay()}function Ae(e,t){return L(w.count(T(e)-1,e),t,2)}function He(e,t){return L(e.getUTCFullYear()%100,t,2)}function $e(e,t){return L((e=Fe(e)).getUTCFullYear()%100,t,2)}function Oe(e,t){return L(e.getUTCFullYear()%1e4,t,4)}function ke(e,t){var n=e.getUTCDay();return L((e=n>=4||0===n?y(e):y.ceil(e)).getUTCFullYear()%1e4,t,4)}function Ge(){return"+0000"}function Be(){return"%"}function je(e){return+e}function Ne(e){return Math.floor(+e/1e3)}U=function(e){var t=e.dateTime,n=e.date,r=e.time,o=e.periods,a=e.days,c=e.shortDays,i=e.months,l=e.shortMonths,g=Y(o),f=_(o),m=Y(a),h=_(a),y=Y(c),v=_(c),T=Y(i),U=_(i),M=Y(l),b=_(l),I={a:function(e){return c[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return i[e.getMonth()]},c:null,d:ee,e:ee,f:ae,g:we,G:ve,H:te,I:ne,j:re,L:oe,m:ue,M:ce,p:function(e){return o[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:je,s:Ne,S:ie,u:se,U:le,V:fe,w:de,W:me,x:null,X:null,y:he,Y:ye,Z:Te,"%":Be},x={a:function(e){return c[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return i[e.getUTCMonth()]},c:null,d:pe,e:pe,f:be,g:$e,G:ke,H:Ce,I:De,j:Ue,L:Me,m:Se,M:Ie,p:function(e){return o[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:je,s:Ne,S:xe,u:Ee,U:Le,V:Ye,w:_e,W:Ae,x:null,X:null,y:He,Y:Oe,Z:Ge,"%":Be},E={a:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.w=v.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=M.exec(t.slice(n));return r?(e.m=b.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=T.exec(t.slice(n));return r?(e.m=U.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return ge(e,t,n,r)},d:Z,e:Z,f:Q,g:B,G:G,H:W,I:W,j:P,L:J,m:R,M:V,p:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.p=f.get(r[0].toLowerCase()),n+r[0].length):-1},q:N,Q:z,s:K,S:q,u:H,U:$,V:O,w:A,W:k,x:function(e,t,r){return ge(e,n,t,r)},X:function(e,t,n){return ge(e,r,t,n)},y:B,Y:G,Z:j,"%":X};function L(e,t){return function(n){var r,o,a,u=[],c=-1,i=0,s=e.length;for(n instanceof Date||(n=new Date(+n));++c<s;)37===e.charCodeAt(c)&&(u.push(e.slice(i,c)),null!=(o=S[r=e.charAt(++c)])?r=e.charAt(++c):o="e"===r?" ":"0",(a=t[r])&&(r=a(n,o)),u.push(r),i=c+1);return u.push(e.slice(i,c)),u.join("")}}function F(e,t){return function(n){var r,o,a=D(1900,void 0,1);if(ge(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(o=(r=C(D(a.y,0,1))).getUTCDay(),r=o>4||0===o?w.ceil(r):w(r),r=d.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(o=(r=p(D(a.y,0,1))).getDay(),r=o>4||0===o?s.ceil(r):s(r),r=u.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),o="Z"in a?C(D(a.y,0,1)).getUTCDay():p(D(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(o+5)%7:a.w+7*a.U-(o+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,C(a)):p(a)}}function ge(e,t,n,r){for(var o,a,u=0,c=t.length,i=n.length;u<c;){if(r>=i)return-1;if(37===(o=t.charCodeAt(u++))){if(o=t.charAt(u++),!(a=E[o in S?t.charAt(u++):o])||(r=a(e,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}return I.x=L(n,I),I.X=L(r,I),I.c=L(t,I),x.x=L(n,x),x.X=L(r,x),x.c=L(t,x),{format:function(e){var t=L(e+="",I);return t.toString=function(){return e},t},parse:function(e){var t=F(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=L(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=F(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),M=U.utcFormat,b=U.utcParse;const Re="https://epic.gsfc.nasa.gov/",Ze="https://rammb-slider.cira.colostate.edu/data/",Pe="https://epic.gsfc.nasa.gov",We="INFRARED_FULL",Ve="D531106",qe="EPIC",Je="EPIC_ENHANCED",Qe="GOES_16",Xe="GOES_16_NATURAL",ze="GOES_17",Ke="GOES_17_NATURAL",et="METEOSAT",tt="METEOSAT_IODC",nt=550,rt=[1,4,8,16,20],ot=678,at=[1,2,4,8,16],ut=2048,ct="imageData",it="cachedDate",st="cachedImageType",lt=window.browser&&!!browser.storage,gt={animated:!1,imageType:Ve};function ft(e,t=432e3){return lt?e:`https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url=${e}&container=focus&refresh=${t}`}function dt(e,t){let n=e+"";for(;n.length<t;)n="0"+n;return n}async function mt(e){const t=await fetch("https://himawari-8.appspot.com/latest"+(e===We?"?infrared=true":"")),n=(await t.json()).date;return b("%Y-%m-%d %H:%M:%S")(n)}function ht(e,t){const n=document.getElementById("output").clientHeight*window.devicePixelRatio/e;for(let e=0;e<t.length;e++){const r=t[e];if(r>n)return{blocks:r,level:e}}const r=t.length-1;return{blocks:t[r],level:r}}let wt=null,yt=null;function vt(e){document.getElementById("time").innerHTML=null===e?"":`<abbr title="${e}">${function(e){const t=Math.floor(((new Date).getTime()-e.getTime())/1e3);let n=Math.floor(t/31536e3);return n>1?n+" years":(n=Math.floor(t/2592e3),n>1?n+" months":(n=Math.floor(t/86400),n>1?n+" days":(n=Math.floor(t/3600),n>1?n+" hours":(n=Math.floor(t/60),n>1?n+" minutes":Math.floor(t)+" seconds"))))}(e)}</abbr> ago`}function Tt(e,t){vt(e),wt=e,function(e){switch(document.body.classList.remove("himawari"),document.body.classList.remove("dscovr"),document.body.classList.remove("goes"),document.body.classList.remove("goes16"),document.body.classList.remove("meteosat"),e){case We:case Ve:document.body.classList.add("himawari");break;case qe:case Je:document.body.classList.add("dscovr");break;case Qe:case Xe:case ze:case Ke:document.body.classList.add("goes");break;case et:case tt:document.body.classList.add("meteosat");break;default:console.warn("Unknown image type",e)}}(t),yt=t}function pt(e,t,n=.95){const r=document.getElementById("output").toDataURL("image/jpeg",n);try{localStorage.setItem(ct,r)}catch{if(n>.5)return n-=.05,console.warn(`Couldn't store image. Trying again with lower image quality of ${n}`),pt(e,t,n)}localStorage.setItem(it,e.toString()),localStorage.setItem(st,t)}function Ct(e,t){if(wt&&e.getTime()===wt.getTime()&&yt===t)return;const n=!localStorage.getItem(it);n&&Tt(e,t);const r=function(e){const t="https://himawari8-dl.nict.go.jp/himawari8/img/"+(e.type||Ve),n=e.date,r=e.blocks,o=`${t}/${r}d/550/${M("%Y/%m/%d/%H%M%S")(n)}`,a=[];for(let e=0;e<r;e++)for(let t=0;t<r;t++){const n=`${o}_${t}_${e}.png`;a.push({url:ft(n),x:t,y:e})}return{blocks:r,date:n,tiles:a}}({blocks:ht(nt,rt).blocks,date:e,type:t}),o=r.blocks*nt,a=n?document.getElementById("output"):document.createElement("canvas"),u=a.getContext("2d");u.canvas.width=o,u.canvas.height=o,Promise.all(r.tiles.map((e=>function(e){return new Promise((t=>{const n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=()=>{u.drawImage(n,e.x*nt,e.y*nt,nt,nt),t()},n.src=e.url}))}(e)))).catch((e=>{throw e})).then((()=>{if(!n){const e=document.getElementById("output").getContext("2d");e.canvas.width=o,e.canvas.height=o,e.drawImage(a,0,0)}Tt(e,t),pt(e,t)}))}function Dt(e,t){if(wt&&e.getTime()===wt.getTime()&&yt===t)return;const n=!localStorage.getItem(it);n&&Tt(e,t);const r=function(e){const t=e.date,n=e.blocks,r=e.level,o={GOES_16:"geocolor",GOES_16_NATURAL:"natural_color",GOES_17:"geocolor",GOES_17_NATURAL:"natural_color"}[e.type],a={GOES_16:16,GOES_16_NATURAL:16,GOES_17:17,GOES_17_NATURAL:17}[e.type],u=M("%Y/%m/%d")(e.date),c=M("%Y%m%d%H%M%S")(e.date),i=`${Ze}imagery/${u}/goes-${a}---full_disk/${o}/${c}/`,s=[];for(let e=0;e<n;e++)for(let t=0;t<n;t++){const n=`${i}${dt(r,2)}/${dt(e,3)}_${dt(t,3)}.png`;s.push({url:ft(n),x:t,y:e})}return{blocks:n,date:t,tiles:s}}({date:e,type:t,...ht(ot,at)}),o=r.blocks*ot,a=n?document.getElementById("output"):document.createElement("canvas"),u=a.getContext("2d");u.canvas.width=o,u.canvas.height=o,Promise.all(r.tiles.map((e=>function(e){return new Promise((t=>{const n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=()=>{u.drawImage(n,e.x*ot,e.y*ot,ot,ot),t()},n.src=e.url}))}(e)))).catch((e=>{throw e})).then((()=>{if(!n){const e=document.getElementById("output").getContext("2d");e.canvas.width=o,e.canvas.height=o,e.drawImage(a,0,0)}Tt(e,t),pt(e,t)}))}async function Ut(){if(navigator.onLine)if(lt){document.title="New Tab";const{imageType:e}=await browser.storage.sync.get(gt);switch(e){case qe:case Je:!function(e,t){if(wt&&e.date.getTime()===wt.getTime()&&yt===t)return;const n=!localStorage.getItem(it);n&&Tt(e.date,t);const r=n?document.getElementById("output"):document.createElement("canvas"),o=r.getContext("2d");o.canvas.width=ut,o.canvas.height=ut;const a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=()=>{if(o.drawImage(a,0,0),!n){const e=document.getElementById("output").getContext("2d");e.canvas.width=ut,e.canvas.height=ut,e.drawImage(r,0,0)}Tt(e.date,t),pt(e.date,t)};const u=t===Je?"enhanced":"natural",c=dt(e.date.getMonth()+1,2),i=dt(e.date.getDate(),2);a.src=ft(`${Re}archive/${u}/${e.date.getFullYear()}/${c}/${i}/png/${e.image}.png`)}(await async function(e){const t=await fetch(`${Re}api/${e===Je?"enhanced":"natural"}`),n=await t.json();if(0===n.length)return null;const r=n[n.length-1];return{date:b("%Y-%m-%d %H:%M:%S")(r.date),image:r.image}}(e),e);break;case Qe:case Xe:case ze:case Ke:Dt(await async function(e){const t={GOES_16:16,GOES_16_NATURAL:16,GOES_17:17,GOES_17_NATURAL:17}[e],n=await fetch(`${Ze}json/goes-${t}/full_disk/geocolor/latest_times.json`),r=await n.json();return b("%Y%m%d%H%M%S")(r.timestamps_int[0])}(e),e);break;case et:case tt:!function(e,t){if(wt&&e.date.getTime()===wt.getTime()&&yt===t)return;const n=!localStorage.getItem(it);n&&Tt(e.date,t);const r=n?document.getElementById("output"):document.createElement("canvas"),o=r.getContext("2d");o.canvas.width=3712,o.canvas.height=3630;const a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=()=>{if(o.drawImage(a,0,0),!n){const e=document.getElementById("output").getContext("2d");e.canvas.width=3712,e.canvas.height=3630,e.drawImage(r,0,0)}Tt(e.date,t),pt(e.date,t)},a.src=ft(e.image)}(await async function(e){const t=await fetch("https://meteosat-url.appspot.com/msg"+(e===tt?"iodc":"")),n=await t.json();return{date:b("%Y-%m-%d %H:%M:%S")(n.date),image:n.url}}(e),e);break;default:Ct(await mt(e),e)}}else Ct(await mt(Ve),Ve)}function Mt(){localStorage.getItem(it)&&function(){const e=document.getElementById("output").getContext("2d"),t=new Date(localStorage.getItem(it)),n=new Image;n.onload=()=>{e.canvas.width=n.width,e.canvas.height=n.height,e.drawImage(n,0,0),Tt(t,localStorage.getItem(st))},n.src=localStorage.getItem(ct)}(),Ut()}window.setInterval(Ut,6e4),window.addEventListener("online",Ut),lt?browser.storage.sync.get(gt).then((e=>{e.animated?document.body.classList.add("animated"):document.body.classList.remove("animated"),Mt()})):Mt(),window.setInterval((()=>{wt&&vt(wt)}),1e4),lt&&(browser.storage.onChanged.addListener(Ut),document.body.classList.add("extension"),document.getElementById("go-to-options").addEventListener("click",(()=>{browser.runtime.openOptionsPage()}))),document.getElementById("explore").addEventListener("click",(()=>{switch(yt){case qe:window.open(Pe,"_self");break;case Je:window.open("https://epic.gsfc.nasa.gov/enhanced","_self");break;case Qe:case Xe:case ze:case Ke:window.open("https://rammb-slider.cira.colostate.edu/","_self");break;case We:case Ve:window.open("https://himawari8.nict.go.jp/himawari8-image.htm?sI=D531106","_self");break;case et:case tt:window.open("https://eumetview.eumetsat.int/static-images/","_self");break;default:window.alert("No explorer found.")}}))}();
//# sourceMappingURL=bundle.js.map
